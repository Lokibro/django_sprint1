{% with request.resolver_match.view_name as view_name %}
  <article>
    <ul>
      <li>
        Место: {{ post.location }}
      </li>
      <li>
        Дата: {{ post.date }}
      </li>
      <li>
        Категория:
        <a href="{% url 'blog:category_posts' category_slug=post.category %}">
          {{ post.category }}
        </a>
      </li>
    </ul>
    {% if view_name == 'blog:index' %}
      <p>
        {{ post.text|truncatewords:10 }}
      </p>
      <a href="{% url 'blog:post_detail' post_id=post.id %}">Читать полный текст</a>
    {% else %}
      <p>
        {{ post.text|linebreaksbr }}
      </p>
    {% endif %}
  </article>
{% endwith %}